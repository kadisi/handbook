---
网络: select 和 poll 
---

# 概述 

我们看到TCP客户同事处理两个输入： 标准输入和TCP套接字。 我们遇到的问题就是在客户阻塞于（标准输入上）fgets 调用期间， 服务器进程会被杀死。 服务器TCP 虽然正确的给客户TCP发送了一个FIN ， 但是既然客户进程正阻塞与从标准输入读入的过程， 它将看不到这个EOF，直到从套接字读时为止。（可能已经过了很长时间） 这样的进程需要一种预先告知内核的能力。使得内核一旦发现进程指定的一个或者多个IO条件就绪 它就通知进程。 这个能力成为IO复用。 是由select 和poll 这两个函数支持的。 

有些系统提供了更为先进的让进程在一串事件上等待的机制。


# IO 复用典型 使用在下列网络应用场合

* 当客户处理多个描述符（通常是交互式输入和网络套接字时候） 必须使用IO复用。 这是我们早先描述过的场合。

* 一个 客户同时处理多个套接字是可能的， 不过比较少见

* 如果一个TCP 服务器既要处理监听套接字 又要处理已连接套接字， 一般就要使用IO 复用

* 如果一个服务器既要处理TCP 又要处理UDP，一般就要使用IO复用

* 如果一个服务器要处理多个服务或者多个协议， 一般就要使用IO复用


IO复用并非只限于网络编程， 许多重要的应用程序也需要这项技术

# IO模型

在介绍select 和poll 两个函数之前， 我们需要回顾整体。 查看Unix 下5种IO模型的基本区别：

* 阻塞式IO

* 非阻塞式IO

* IO 复用 （select 和poll）

* 信号驱动式 IO（SIGIO）

* 异步IO 


